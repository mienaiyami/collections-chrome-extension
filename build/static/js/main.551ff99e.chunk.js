(this["webpackJsonpcollection-extension"]=this["webpackJsonpcollection-extension"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),l=n(9),i=n.n(l),r=(n(14),n(3)),s=n(2),a=n(0),u=o.a.forwardRef((function(e,t){return Object(a.jsxs)("label",{onClick:function(e){e.stopPropagation()},className:"inputCheckboxCont",children:[Object(a.jsx)("input",{type:"checkbox",ref:t}),Object(a.jsx)("span",{className:"inputCheckbox",children:Object(a.jsx)("span",{className:"check",children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})})})})]})})),d=function(e){var t=e.name,n=e.total,o=e.openCollection,l=(e.removeCollections,e.collectionContextMenu),i=e.addToSelected,r=e.removeFromSelected,d=e.addLinkToCollection,f=e.onCollectionDrag,h=e.indexNumber,j=Object(c.useRef)(null),b=Object(c.useState)(!1),m=Object(s.a)(b,2),p=m[0],x=m[1];return Object(c.useEffect)((function(){j.current.addEventListener("change",(function(e){var t=e.target.checked;x(t)}))}),[]),Object(c.useEffect)((function(){!0===p&&i(h),!1===p&&r(h)}),[p]),Object(a.jsxs)("div",{className:"collectionItem","data-checked":p,tabIndex:"0","data-index":h,onClick:function(){o(h)},onContextMenu:function(e){e.preventDefault(),l(e,h)},draggable:!0,onDragStart:function(e){e.preventDefault(),f(e,h)},children:[Object(a.jsx)("div",{className:"addCurrent",children:Object(a.jsx)("button",{onClick:function(e){e.stopPropagation(),chrome.tabs.query({active:!0,currentWindow:!0}).then((function(e){var t=e[0];d({colIndex:h,link:t.url,title:t.title,cover:t.favIconUrl})}))},children:"+"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("span",{className:"name",title:t,children:t||"ddddd"}),Object(a.jsx)("span",{className:"total",children:n?n>1?n+" Items":n+" item":"0 Item"})]}),Object(a.jsx)("div",{className:"options",children:Object(a.jsx)(u,{ref:j})})]})},f=function(e){var t=e.main,n=e.name,o=e.goBack,l=e.isNewCollection,i=e.newColMakingUpdater,r=e.currentCollection,s=e.addToCollections,u=e.editCollection,d=e.currentCollectionUpdater,f=e.theme,h=e.themeUpdater;l=void 0!==l&&l;var j=Object(c.useRef)(null);Object(c.useEffect)((function(){l&&j.current.focus()}),[l]);var b=Object(a.jsxs)("div",{className:"options",children:[Object(a.jsx)("button",{className:"switchTheme",onClick:function(){return"dark"===f?h("light"):"light"===f?h("dark"):void 0},children:"dark"===f?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",children:Object(a.jsx)("path",{d:"M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"})}):Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",children:Object(a.jsx)("path",{d:"M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"})})}),t?Object(a.jsx)("button",{className:"github",onClick:function(){chrome.tabs.create({url:"https://github.com/mienaiyami/collections-chrome-extension"})},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"24px",height:"24px",children:Object(a.jsx)("path",{d:"M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"})})}):"",Object(a.jsx)("button",{className:"openFull",onClick:function(){chrome.tabs.create({url:"chrome-extension://"+chrome.app.getDetails().id+"/index.html"})},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",children:Object(a.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})})}),Object(a.jsx)("button",{className:"close",onClick:function(){return window.close()},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]});return Object(a.jsx)(a.Fragment,{children:t?Object(a.jsxs)("div",{id:"topbar",children:[Object(a.jsx)("h2",{children:"Collections"}),b]}):Object(a.jsxs)("div",{id:"topbar",children:[Object(a.jsx)("button",{className:"goback",onClick:o,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",children:Object(a.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"})})}),Object(a.jsx)("h2",{children:Object(a.jsx)("input",{type:"text",ref:j,defaultValue:n||"New Collection",onKeyDown:function(e){"Enter"===e.key&&e.target.blur()},onBlur:function(e){return l&&""===e.target.value&&i(!1),""===e.target.value?e.target.value=n:l?void(l&&(s({name:e.target.value,content:[]}),i(!1),d(0))):u({type:"rename",index:r,name:e.target.value})}})}),b]})})},h=function(e){var t=e.collectionData,n=e.removeCollections,o=e.changeCollectionIndex,l=e.currentCollectionUpdater,i=e.newCollection1,u=e.newCollection2,h=e.addLinkToCollection,j=e.theme,b=e.themeUpdater,m=Object(c.useRef)(null),p=Object(c.useRef)(null),x=Object(c.useRef)(null),O=Object(c.useRef)(null),v=Object(c.useState)("closed"),g=Object(s.a)(v,2),C=g[0],w=g[1],k=Object(c.useState)(!1),y=Object(s.a)(k,2),N=y[0],L=y[1],M=Object(c.useState)(null),S=Object(s.a)(M,2),F=S[0],T=S[1],E=Object(c.useState)(null),I=Object(s.a)(E,2),W=I[0],z=I[1],U=Object(c.useState)(!0),H=Object(s.a)(U,2),B=H[0],D=H[1],q=Object(c.useState)(null),A=Object(s.a)(q,2),R=A[0],X=A[1],V=function(e,t){if(null!==x.current){var n=e.clientX>m.current.offsetWidth-x.current.offsetWidth?m.current.offsetWidth-x.current.offsetWidth-30:e.clientX,c=e.clientY>document.body.offsetHeight-x.current.offsetHeight?document.body.offsetHeight-x.current.offsetHeight-30:e.clientY;X(t),x.current.style.left=n+"px",x.current.style.top=c+"px"}w("opened")},Y=function(e){!N&&B&&l(e)},P=Object(c.useState)([]),J=Object(s.a)(P,2),K=J[0],G=J[1],Q=function(e){K.includes(e)||G([].concat(Object(r.a)(K),[e]))},Z=function(e){K.includes(e)&&G(Object(r.a)(K.filter((function(t){return t!==e}))))};Object(c.useEffect)((function(){K.length}),[K]),Object(c.useEffect)((function(){document.addEventListener("mousedown",(function(e){null===x||e.target===x.current||e.path.includes(x.current)||w("closed")}))}),[]);var $=function(){var e;G([]),Object(r.a)(null===(e=p.current)||void 0===e?void 0:e.children).forEach((function(e){e.lastElementChild.firstElementChild.firstElementChild.checked=!1,e.lastElementChild.firstElementChild.firstElementChild.dispatchEvent(new Event("change"))}))},_=Object(c.useState)(""),ee=Object(s.a)(_,2),te=ee[0],ne=ee[1],ce=function(e,n){L(!0),T(n),O.current.style.display="flex";var c=O.current.querySelector(".name");c.innerHTML=t[n].name,e.pageX-m.current.offsetLeft>=m.current.offsetWidth-c.offsetWidth-20?c.style.left=m.current.offsetWidth-c.offsetWidth-20+"px":c.style.left=e.pageX-m.current.offsetLeft+20+"px",c.style.top=e.pageY-m.current.offsetTop+20+"px",O.current.querySelector(".line").style.top=p.current.offsetTop+p.current.children[n].offsetTop-5+"px"},oe=function e(t){var n=t.parentElement;return n.classList.contains("collectionItem")||["collections","main","app"].includes(n.id)||n===document.body||(n=e(n)),n},le=function(e){var t,n,c=O.current.querySelector(".name");e.pageX-m.current.offsetLeft>=m.current.offsetWidth-c.offsetWidth-40?c.style.left=m.current.offsetWidth-c.offsetWidth-20+"px":c.style.left=e.pageX-m.current.offsetLeft+20+"px",c.style.top=e.pageY-m.current.offsetTop+20+"px";var o=O.current.querySelector(".line"),l=document.elementFromPoint(e.pageX,e.pageY),i=W;(null===l||void 0===l||null===(t=l.classList)||void 0===t?void 0:t.contains("collectionItem"))||l===p.current||l===O.current||l===c||l===o||(i=parseInt(oe(l).getAttribute("data-index"))),(null===l||void 0===l||null===(n=l.classList)||void 0===n?void 0:n.contains("collectionItem"))&&(i=parseInt(l.getAttribute("data-index"))),null===i||isNaN(i)||(z(parseInt(i)),o.style.top=p.current.children[i].offsetTop+p.current.offsetTop-5+"px")};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{main:!0,name:"Collections",currentCollectionUpdater:l,theme:j,themeUpdater:b}),Object(a.jsxs)("div",{id:"main",ref:m,children:[Object(a.jsxs)("div",{className:"dragIndicator",ref:O,children:[Object(a.jsx)("span",{className:"name"}),Object(a.jsx)("span",{className:"line"})]}),Object(a.jsxs)("div",{className:"contextMenu",ref:x,"data-state":C,onClick:function(){w("closed")},children:[Object(a.jsx)("li",{role:"button",onClick:function(){n([R])},children:"Remove Collection"}),Object(a.jsx)("li",{role:"button",onClick:function(){navigator.clipboard.writeText(JSON.stringify(t[R].content))},children:"Copy Links(JSON)"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==R&&t[R].content.map((function(e){return e.href})).forEach((function(e){chrome.tabs.create({url:e,active:!1})}))},children:"Open All"}),Object(a.jsx)("li",{role:"button",onClick:function(){var e=t[R].content.map((function(e){return e.href}));null!==R&&chrome.windows.create({url:e,state:"maximized"})},children:"Open All in new window"}),Object(a.jsx)("li",{role:"button",onClick:function(){var e=t[R].content.map((function(e){return e.href}));null!==R&&chrome.windows.create({url:e,state:"maximized",incognito:!0})},children:"Open All in incognito window"})]}),Object(a.jsxs)("div",{className:"collectionOptions",children:[Object(a.jsxs)("div",{className:"deleteSelected",style:0===K.length?{display:"none"}:{display:"flex"},children:[Object(a.jsxs)("span",{className:"selectedInfo",children:[K.length," selected"]}),Object(a.jsxs)("span",{className:"options",children:[Object(a.jsx)("button",{onClick:function(){var e,t;e="Are you sure you want to delete "+K.length+" collections",t=function(){n(K),$()},ne(Object(a.jsx)("div",{className:"promptConfirmCont",children:Object(a.jsxs)("div",{className:"prompt",children:[Object(a.jsx)("div",{className:"msg",children:e}),Object(a.jsxs)("div",{className:"option",children:[Object(a.jsx)("button",{onClick:function(){t(),ne("")},className:"warn",children:"Confirm"}),Object(a.jsx)("button",{onClick:function(){ne("")},children:"Cancel"})]})]})}))},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})}),Object(a.jsx)("button",{onClick:$,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]}),Object(a.jsxs)("div",{className:"createNew",style:0===K.length?{display:"flex"}:{display:"none"},children:[Object(a.jsx)("button",{className:"newEmpty",onClick:i,children:"Create New Collection"}),Object(a.jsx)("button",{className:"newFromAll",onClick:u,children:"Create New Collection from All Opened tabs"})]})]}),Object(a.jsx)("div",{id:"collections",ref:p,className:"collection-view",onMouseMove:function(e){N&&null!==F&&le(e)},onMouseUp:function(e){N&&null!==F&&(O.current.style.display="none",O.current.querySelector(".name").innerHTML="",F!==W&&o(F,W),L(!1),T(null),z(null),D(!1),setTimeout((function(){D(!0)}),500))},onMouseLeave:function(e){N&&null!==F&&(O.current.style.display="none",O.current.querySelector(".name").innerHTML="",L(!1),T(null),z(null))},children:null===t||0===t.length?Object(a.jsx)("p",{children:"No Collection"}):t.map((function(e,t){return Object(a.jsx)(d,{name:e.name,total:e.content.length,indexNumber:t,openCollection:Y,removeCollections:n,collectionContextMenu:V,addToSelected:Q,removeFromSelected:Z,addLinkToCollection:h,onCollectionDrag:ce},e.name+t)}))})]}),te]})},j=n(4),b=n.n(j),m=n(7),p=function(e){var t=e.title,n=e.href,o=e.displayImg,l=(e.removeLinkFromCollection,e.currentCollection,e.linkContextMenu),i=e.addToSelected,r=e.removeFromSelected,d=e.indexNumber,f=e.filterMeta,h=e.onLinkDrag,j=Object(c.useRef)(null),p=Object(c.useState)(!1),x=Object(s.a)(p,2),O=x[0],v=x[1],g=Object(c.useState)(""),C=Object(s.a)(g,2),w=C[0],k=C[1],y=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:(n=e.sent).ok&&n.text().then((function(e){f(e).then((function(e){""===e&&(e=o),k(e)}))})),429===n.status&&setTimeout((function(){y(t)}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){j.current.addEventListener("change",(function(e){var t=e.target.checked;v(t)})),n.startsWith("http")&&y(n)}),[]),Object(c.useEffect)((function(){!0===O&&i(d),!1===O&&r(d)}),[O]),Object(a.jsxs)("div",{className:"collectionContentItem collectionItem",tabIndex:"0","data-index":d,"data-checked":O,onClick:function(){chrome.tabs.update({url:n})},onMouseDown:function(e){1===e.button&&(e.preventDefault(),chrome.tabs.create({url:n,active:!1}))},onContextMenu:function(e){l(e,d)},draggable:!0,onDragStart:function(e){e.preventDefault(),h(e,d)},children:[Object(a.jsx)("div",{className:"cover",children:Object(a.jsx)("img",{src:w||"",alt:"Img"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("span",{className:"name",title:t,children:t||"ddddd"}),Object(a.jsx)("span",{className:"link",title:n,children:n||""})]}),Object(a.jsx)("div",{className:"options",children:Object(a.jsx)(u,{ref:j})})]})},x=function(e){var t=e.collection,n=e.currentCollection,o=e.currentCollectionUpdater,l=e.isNew,i=e.newColMakingUpdater,u=(e.newCollection1,e.newCollection2,e.addToCollections),d=e.editCollection,h=e.addLinkToCollection,j=e.removeLinkFromCollection,x=e.theme,O=e.themeUpdater,v=e.changeLinkIndex,g=Object(c.useRef)(null),C=Object(c.useRef)(null),w=Object(c.useRef)(null),k=Object(c.useRef)(null),y=Object(c.useState)("closed"),N=Object(s.a)(y,2),L=N[0],M=N[1],S=Object(c.useState)(!1),F=Object(s.a)(S,2),T=F[0],E=F[1],I=Object(c.useState)(null),W=Object(s.a)(I,2),z=W[0],U=W[1],H=Object(c.useState)(null),B=Object(s.a)(H,2),D=B[0],q=B[1],A=Object(c.useState)(!0),R=Object(s.a)(A,2),X=(R[0],R[1]),V=Object(c.useState)(null),Y=Object(s.a)(V,2),P=Y[0],J=Y[1],K=function(e,t){if(null!==w.current){var n=e.clientX>g.current.offsetWidth-w.current.offsetWidth?g.current.offsetWidth-w.current.offsetWidth-30:e.clientX,c=e.clientY>document.body.offsetHeight-w.current.offsetHeight?document.body.offsetHeight-w.current.offsetHeight-30:e.clientY;J(t),w.current.style.left=n+"px",w.current.style.top=c+"px"}M("opened")},G=Object(c.useState)([]),Q=Object(s.a)(G,2),Z=Q[0],$=Q[1],_=function(e){Z.includes(e)||$([].concat(Object(r.a)(Z),[e]))},ee=function(e){Z.includes(e)&&$(Object(r.a)(Z.filter((function(t){return t!==e}))))};Object(c.useEffect)((function(){Z.length}),[Z]),Object(c.useEffect)((function(){document.addEventListener("mousedown",(function(e){null===w||e.target===w.current||e.path.includes(w.current)||M("closed")}))}),[]);var te=function(){var e;$([]),Object(r.a)(null===(e=C.current)||void 0===e?void 0:e.children).forEach((function(e){e.lastElementChild.firstElementChild.firstElementChild.checked=!1,e.lastElementChild.firstElementChild.firstElementChild.dispatchEvent(new Event("change"))}))},ne=new DOMParser,ce=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,c,o,l,i,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n="",c=t.search(/<head.*?<\/head>/gi),o=t.search(/<\/head>/),l=c;l<o;l++)n+=t[l];return n+="</head>",i=ne.parseFromString(n,"text/html"),r=i.querySelector("meta[property='og:image']")||i.querySelector("meta[name='og:image']"),s=r?r.getAttribute("content"):"",e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e,t){"current"===e&&chrome.tabs.query({active:!0,currentWindow:!0}).then((function(e){var t=e[0];h({colIndex:l?0:n,link:t.url,title:t.title,cover:t.favIconUrl})})),"all"===e&&chrome.tabs.query({currentWindow:!0}).then((function(e){for(var t=e.length-1;t>=0;t--)h({colIndex:n,link:e[t].url,title:e[t].title,cover:e[t].favIconUrl})}))},le=function(e,n){E(!0),U(n),k.current.style.display="flex";var c=k.current.querySelector(".name");c.innerHTML=t.content[n].title,e.pageX-g.current.offsetLeft>=g.current.offsetWidth-c.offsetWidth-20?c.style.left=g.current.offsetWidth-c.offsetWidth-20+"px":c.style.left=e.pageX-g.current.offsetLeft+20+"px",c.style.top=e.pageY-g.current.offsetTop+20+"px",k.current.querySelector(".line").style.top=C.current.offsetTop+C.current.children[n].offsetTop-5+"px"},ie=function e(t){var n=t.parentElement;return n.classList.contains("collectionItem")||["collectionView ","main","app"].includes(n.id)||n===document.body||(n=e(n)),n},re=function(e){var t,n,c=k.current.querySelector(".name");e.pageX-g.current.offsetLeft>=g.current.offsetWidth-c.offsetWidth-40?c.style.left=g.current.offsetWidth-c.offsetWidth-20+"px":c.style.left=e.pageX-g.current.offsetLeft+20+"px",c.style.top=e.pageY-g.current.offsetTop+20+"px";var o=k.current.querySelector(".line"),l=document.elementFromPoint(e.pageX,e.pageY),i=D;(null===l||void 0===l||null===(t=l.classList)||void 0===t?void 0:t.contains("collectionItem"))||l===C.current||l===k.current||l===c||l===o||(i=parseInt(ie(l).getAttribute("data-index"))),(null===l||void 0===l||null===(n=l.classList)||void 0===n?void 0:n.contains("collectionItem"))&&(i=parseInt(l.getAttribute("data-index"))),null===i||isNaN(i)||(q(parseInt(i)),o.style.top=C.current.children[i].offsetTop+C.current.offsetTop-5+"px")},se=function(e){k.current.style.display="none",k.current.querySelector(".name").innerHTML="",z!==D&&v(n,z,D),E(!1),U(null),q(null),X(!1),setTimeout((function(){X(!0)}),500)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{main:!1,name:null===t?null:t.name,goBack:function(){o(null),l&&i(!1)},isNewCollection:l,addToCollections:u,newColMakingUpdater:i,currentCollectionUpdater:o,editCollection:d,currentCollection:n,theme:x,themeUpdater:O}),Object(a.jsxs)("div",{id:"main",ref:g,onMouseMove:function(e){T&&null!==z&&re(e)},onMouseUp:function(e){T&&null!==z&&se()},onMouseLeave:function(e){T&&null!==z&&se()},children:[Object(a.jsxs)("div",{className:"dragIndicator",ref:k,children:[Object(a.jsx)("span",{className:"name"}),Object(a.jsx)("span",{className:"line"})]}),Object(a.jsxs)("div",{className:"contextMenu",ref:w,"data-state":L,onClick:function(){M("closed")},children:[Object(a.jsx)("li",{role:"button",onClick:function(){j(n,[P])},children:"Remove Link"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==P&&navigator.clipboard.writeText(t.content[P].href)},children:"Copy Link"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==P&&chrome.tabs.create({url:t.content[P].href})},children:"Open"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==P&&chrome.windows.create({url:t.content[P].href,state:"maximized"})},children:"Open in new window"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==P&&chrome.windows.create({url:t.content[P].href,state:"maximized",incognito:!0})},children:"Open in incognito window"})]}),Object(a.jsxs)("div",{className:"collectionOptions",children:[Object(a.jsxs)("div",{className:"deleteSelected",style:0===Z.length?{display:"none"}:{display:"flex"},children:[Object(a.jsxs)("span",{className:"selectedInfo",children:[Z.length," selected"]}),Object(a.jsxs)("span",{className:"options",children:[Object(a.jsx)("button",{onClick:function(){t.content.filter((function(e,t){return Z.includes(t)})).map((function(e){return e.href})).forEach((function(e){chrome.tabs.create({url:e,active:!1})}))},children:"Open"}),Object(a.jsx)("button",{onClick:function(){var e=t.content.filter((function(e,t){return Z.includes(t)})).map((function(e){return e.href}));chrome.windows.create({url:e,state:"maximized",incognito:!0})},children:"Open Incognito"}),Object(a.jsx)("button",{onClick:function(){j(n,Z),te()},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})}),Object(a.jsx)("button",{onClick:te,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]}),Object(a.jsxs)("div",{className:"createNew",style:0===Z.length?{display:"flex"}:{display:"none"},children:[Object(a.jsx)("button",{className:"addCurrentLink",onClick:function(){return oe("current")},children:"Add Current Tab"}),Object(a.jsx)("button",{className:"addCurrentLink",onClick:function(){return oe("all")},children:"Add All opened Tabs"})]})]}),Object(a.jsx)("div",{id:"collectionView ",className:"collection-view",ref:C,children:null===t||0===t.content.length?Object(a.jsx)("p",{children:"No Item"}):t.content.map((function(e,t){return Object(a.jsx)(p,{title:e.title,href:e.href,displayImg:e.cover,indexNumber:t,currentCollection:n,removeLinkFromCollection:j,linkContextMenu:K,addToSelected:_,removeFromSelected:ee,filterMeta:ce,onLinkDrag:le},e.href+t)}))})]})]})},O=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(c.useState)("dark"),i=Object(s.a)(l,2),u=i[0],d=i[1];Object(c.useEffect)((function(){chrome.storage.local.get("collections",(function(e){var t=e.collections;void 0===t?(o([]),chrome.storage.local.set({collections:[]},(function(){}))):o(t)})),chrome.storage.local.get("theme",(function(e){var t=e.theme;void 0===t?(d("dark"),chrome.storage.local.set({theme:"dark"},(function(){}))):d(t)})),document.getElementById("app").oncontextmenu=function(e){e.preventDefault()}}),[]);var f=Object(c.useState)(null),j=Object(s.a)(f,2),b=j[0],m=j[1],p=Object(c.useState)(!1),O=Object(s.a)(p,2),v=O[0],g=O[1],C=function(){g(!0)};Object(c.useEffect)((function(){chrome.storage.local.set({collections:n})}),[n]),Object(c.useEffect)((function(){"dark"===u&&(document.body.classList.remove("lightTheme"),document.body.classList.add("darkTheme")),"light"===u&&(document.body.classList.remove("darkTheme"),document.body.classList.add("lightTheme")),chrome.storage.local.set({theme:u})}),[u]);var w=function(e){var t=e.colIndex,c=e.link,l={type:"link",title:e.title||"title",cover:e.cover||"",href:c};n[t].content.unshift(l),o(Object(r.a)(n))},k=function(e,t){if(!(n.length<e)&&!(n[e].content.length<Math.max.apply(Math,Object(r.a)(t)))){var c=Object(r.a)(n);c[e].content=c[e].content.filter((function(e,n){return!t.includes(n)})),o(c)}},y=function(){var e=[];chrome.tabs.query({currentWindow:!0}).then((function(t){t.forEach((function(t){e.push({type:"link",href:t.url,title:t.title,cover:t.favIconUrl})})),n.unshift({name:(new Date).toString().split(" (")[0],cover:"",content:e}),o(Object(r.a)(n))}))},N=function(e){"rename"===e.type&&(n[e.index].name=e.name,o(Object(r.a)(n)))};return Object(a.jsx)(a.Fragment,{children:!0===v?Object(a.jsx)(x,{isNew:!0,newColMakingUpdater:g,collection:null,currentCollection:b,newCollection1:C,newCollection2:y,editCollection:N,currentCollectionUpdater:m,addToCollections:function(e){var t=[{name:e.name,content:e.content}].concat(Object(r.a)(n));o(t)},addLinkToCollection:w,removeLinkFromCollection:k,theme:u,themeUpdater:d}):null===b?Object(a.jsx)(h,{collectionData:n,newCollection1:C,newCollection2:y,currentCollectionUpdater:m,addLinkToCollection:w,removeCollections:function(e){if(!(n.length<Math.max.apply(Math,Object(r.a)(e)))){var t=Object(r.a)(n).filter((function(t,n){return!e.includes(n)}));o(t)}},theme:u,changeCollectionIndex:function(e,t){var c=Object(r.a)(n);c.splice(e,1),c.splice(t,0,n[e]),o(c)},themeUpdater:d}):Object(a.jsx)(x,{isNew:!1,newColMakingUpdater:g,collection:n[b],currentCollection:b,newCollection1:C,newCollection2:y,editCollection:N,currentCollectionUpdater:m,addLinkToCollection:w,removeLinkFromCollection:k,theme:u,themeUpdater:d,changeLinkIndex:function(e,t,c){var l=Object(r.a)(n[e].content);l.splice(t,1),l.splice(c,0,n[e].content[t]),n[e].content=l,o(Object(r.a)(n))}})})};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(O,{})}),document.getElementById("app"))}},[[17,1,2]]]);
//# sourceMappingURL=main.551ff99e.chunk.js.map