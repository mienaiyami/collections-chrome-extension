(this["webpackJsonpcollection-extension"]=this["webpackJsonpcollection-extension"]||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),l=n(7),i=n.n(l),r=(n(12),n(3)),s=n(2),a=n(0),d=o.a.forwardRef((function(e,t){return Object(a.jsxs)("label",{onClick:function(e){e.stopPropagation()},className:"inputCheckboxCont",children:[Object(a.jsx)("input",{type:"checkbox",ref:t}),Object(a.jsx)("span",{className:"inputCheckbox",children:Object(a.jsx)("span",{className:"check",children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})})})})]})})),u=function(e){var t=e.cover,n=e.name,o=e.total,l=e.openCollection,i=(e.removeCollections,e.collectionContextMenu),r=e.addToSelected,u=e.removeFromSelected,j=e.indexNumber,h=Object(c.useRef)(null),f=Object(c.useState)(!1),b=Object(s.a)(f,2),m=b[0],x=b[1];return Object(c.useEffect)((function(){h.current.addEventListener("change",(function(e){var t=e.target.checked;console.log("ddddddd"),x(t)}))}),[]),Object(c.useEffect)((function(){!0===m&&r(j),!1===m&&u(j)}),[m]),Object(a.jsxs)("div",{className:"collectionItem","data-checked":m,tabIndex:"0",onClick:function(){return l(j)},onContextMenu:function(e){e.preventDefault(),i(e,j)},draggable:!0,children:[Object(a.jsx)("div",{className:"cover",children:Object(a.jsx)("img",{src:t||"",alt:"Img"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("span",{className:"name",children:n||"ddddd"}),Object(a.jsx)("span",{className:"total",children:o?o>1?o+" Items":o+" item":"0 Item"})]}),Object(a.jsx)("div",{className:"options",children:Object(a.jsx)(d,{ref:h})})]})},j=function(e){var t=e.main,n=e.name,o=e.goBack,l=e.isNewCollection,i=e.newColMakingUpdater,r=e.currentCollection,s=e.addToCollections,d=e.editCollection,u=e.currentCollectionUpdater;l=void 0!==l&&l;var j=Object(c.useRef)(null);Object(c.useEffect)((function(){l&&j.current.focus()}),[l]);var h=Object(a.jsxs)("div",{className:"options",children:[Object(a.jsx)("button",{className:"openFull",onClick:function(){chrome.tabs.create({url:"chrome-extension://"+chrome.app.getDetails().id+"/index.html"})},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})})}),Object(a.jsx)("button",{className:"close",onClick:function(){return window.close()},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]});return Object(a.jsx)(a.Fragment,{children:t?Object(a.jsxs)("div",{id:"topbar",children:[Object(a.jsx)("h2",{children:"Collections"}),h]}):Object(a.jsxs)("div",{id:"topbar",children:[Object(a.jsx)("button",{className:"goback",onClick:o,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"})})}),Object(a.jsx)("h2",{children:Object(a.jsx)("input",{type:"text",ref:j,defaultValue:n||"New Collection",onKeyDown:function(e){"Enter"===e.key&&e.target.blur()},onBlur:function(e){return l&&""===e.target.value&&i(!1),""===e.target.value?e.target.value=n:l?void(l&&(s({name:e.target.value,content:[]}),i(!1),u(0))):d({type:"rename",index:r,name:e.target.value})}})}),h]})})},h=function(e){var t=e.collectionData,n=e.removeCollections,o=e.currentCollectionUpdater,l=e.newCollection1,i=e.newCollection2,d=function(e){o(e)},h=Object(c.useRef)(null),f=Object(c.useRef)(null),b=Object(c.useRef)(null),m=Object(c.useState)("closed"),x=Object(s.a)(m,2),O=x[0],v=x[1],p=Object(c.useState)(null),g=Object(s.a)(p,2),C=g[0],w=g[1],k=function(e,t){if(null!==b.current){var n=e.clientX>h.current.offsetWidth-b.current.offsetWidth?h.current.offsetWidth-b.current.offsetWidth-30:e.clientX,c=e.clientY>document.body.offsetHeight-b.current.offsetHeight?document.body.offsetHeight-b.current.offsetHeight-30:e.clientY;console.log(n,c),w(t),b.current.style.left=n+"px",b.current.style.top=c+"px"}v("opened")},F=Object(c.useState)([]),N=Object(s.a)(F,2),y=N[0],E=N[1],M=function(e){y.includes(e)||E([].concat(Object(r.a)(y),[e]))},L=function(e){y.includes(e)&&E(Object(r.a)(y.filter((function(t){return t!==e}))))};Object(c.useEffect)((function(){console.log("aaaa",y),y.length}),[y]),Object(c.useEffect)((function(){document.addEventListener("mousedown",(function(e){null===b||e.target===b.current||e.path.includes(b.current)||v("closed")}))}),[]);var S=function(){var e;E([]),Object(r.a)(null===(e=f.current)||void 0===e?void 0:e.children).forEach((function(e){e.lastElementChild.firstElementChild.firstElementChild.checked=!1,e.lastElementChild.firstElementChild.firstElementChild.dispatchEvent(new Event("change"))}))},I=Object(c.useState)(""),z=Object(s.a)(I,2),U=z[0],H=z[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j,{main:!0,name:"Collections",currentCollectionUpdater:o}),Object(a.jsxs)("div",{id:"main",ref:h,children:[Object(a.jsxs)("div",{className:"contextMenu",ref:b,"data-state":O,onClick:function(){v("closed")},children:[Object(a.jsx)("li",{role:"button",onClick:function(){n([C])},children:"Remove Collection"}),Object(a.jsx)("li",{role:"button",onClick:function(){navigator.clipboard.writeText(JSON.stringify(t[C].content))},children:"Copy Links(JSON)"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==C&&t[C].content.map((function(e){return e.href})).forEach((function(e){chrome.tabs.create({url:e,active:!1})}))},children:"Open All"}),Object(a.jsx)("li",{role:"button",onClick:function(){var e=t[C].content.map((function(e){return e.href}));null!==C&&chrome.windows.create({url:e,state:"maximized"})},children:"Open All in new window"}),Object(a.jsx)("li",{role:"button",onClick:function(){var e=t[C].content.map((function(e){return e.href}));null!==C&&chrome.windows.create({url:e,state:"maximized",incognito:!0})},children:"Open All in incognito window"})]}),Object(a.jsxs)("div",{className:"deleteSelected",style:0===y.length?{display:"none"}:{display:"flex"},children:[Object(a.jsxs)("span",{className:"selectedInfo",children:[y.length," selected"]}),Object(a.jsxs)("span",{className:"options",children:[Object(a.jsx)("button",{onClick:function(){var e,t;e="Are you sure you want to delete "+y.length+" collections",t=function(){n(y),S()},H(Object(a.jsx)("div",{className:"promptConfirmCont",children:Object(a.jsxs)("div",{className:"prompt",children:[Object(a.jsx)("div",{className:"msg",children:e}),Object(a.jsxs)("div",{className:"option",children:[Object(a.jsx)("button",{onClick:function(){t(),H("")},className:"warn",children:"Confirm"}),Object(a.jsx)("button",{onClick:function(){H("")},children:"Cancel"})]})]})}))},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})}),Object(a.jsx)("button",{onClick:S,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]}),Object(a.jsxs)("div",{className:"createNew",style:0===y.length?{display:"flex"}:{display:"none"},children:[Object(a.jsx)("button",{className:"newEmpty",onClick:l,children:"Create New Collection"}),Object(a.jsx)("button",{className:"newFromAll",onClick:i,children:"Create New Collection from All Opened tabs"})]}),Object(a.jsx)("div",{id:"collections",ref:f,className:"collection-view",children:null===t||0===t.length?Object(a.jsx)("p",{children:"No Collection"}):t.map((function(e,t){return Object(a.jsx)(u,{name:e.name,cover:e.cover,total:e.content.length,indexNumber:t,openCollection:d,removeCollections:n,collectionContextMenu:k,addToSelected:M,removeFromSelected:L},e.name+t)}))})]}),U]})},f=function(e){var t=e.title,n=e.href,o=e.cover,l=(e.removeLinkFromCollection,e.currentCollection,e.linkContextMenu),i=e.addToSelected,r=e.removeFromSelected,u=e.indexNumber,j=Object(c.useRef)(null),h=Object(c.useState)(!1),f=Object(s.a)(h,2),b=f[0],m=f[1];return Object(c.useEffect)((function(){j.current.addEventListener("change",(function(e){var t=e.target.checked;console.log("ddddddd"),m(t)}))}),[]),Object(c.useEffect)((function(){!0===b&&i(u),!1===b&&r(u)}),[b]),Object(a.jsxs)("div",{className:"collectionContentItem collectionItem",tabIndex:"0","data-checked":b,onClick:function(){chrome.tabs.update({url:n})},onMouseDown:function(e){e.preventDefault(),1===e.button&&chrome.tabs.create({url:n,active:!1})},onContextMenu:function(e){l(e,u)},draggable:!0,children:[Object(a.jsx)("div",{className:"cover",children:Object(a.jsx)("img",{src:o||"",alt:"Img"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("span",{className:"name",children:t||"ddddd"}),Object(a.jsx)("span",{className:"link",children:n||""})]}),Object(a.jsx)("div",{className:"options",children:Object(a.jsx)(d,{ref:j})})]})},b=function(e){var t=e.collection,n=e.currentCollection,o=e.currentCollectionUpdater,l=e.isNew,i=e.newColMakingUpdater,d=(e.newCollection1,e.newCollection2,e.addToCollections),u=e.editCollection,h=e.addLinkToCollection,b=e.removeLinkFromCollection,m=Object(c.useRef)(null),x=Object(c.useRef)(null),O=Object(c.useRef)(null),v=Object(c.useState)("closed"),p=Object(s.a)(v,2),g=p[0],C=p[1],w=Object(c.useState)(null),k=Object(s.a)(w,2),F=k[0],N=k[1],y=function(e,t){if(null!==O.current){var n=e.clientX>m.current.offsetWidth-O.current.offsetWidth?m.current.offsetWidth-O.current.offsetWidth-30:e.clientX,c=e.clientY>document.body.offsetHeight-O.current.offsetHeight?document.body.offsetHeight-O.current.offsetHeight-30:e.clientY;console.log(n,c),N(t),O.current.style.left=n+"px",O.current.style.top=c+"px"}C("opened")},E=Object(c.useState)([]),M=Object(s.a)(E,2),L=M[0],S=M[1],I=function(e){L.includes(e)||S([].concat(Object(r.a)(L),[e]))},z=function(e){L.includes(e)&&S(Object(r.a)(L.filter((function(t){return t!==e}))))};Object(c.useEffect)((function(){console.log("aaaa",L),L.length}),[L]),Object(c.useEffect)((function(){document.addEventListener("mousedown",(function(e){null===O||e.target===O.current||e.path.includes(O.current)||C("closed")}))}),[]);var U=function(){var e;S([]),Object(r.a)(null===(e=x.current)||void 0===e?void 0:e.children).forEach((function(e){e.lastElementChild.firstElementChild.firstElementChild.checked=!1,e.lastElementChild.firstElementChild.firstElementChild.dispatchEvent(new Event("change"))}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j,{main:!1,name:null===t?null:t.name,goBack:function(){o(null),l&&i(!1)},isNewCollection:l,addToCollections:d,newColMakingUpdater:i,currentCollectionUpdater:o,editCollection:u,currentCollection:n}),Object(a.jsxs)("div",{id:"main",ref:m,children:[Object(a.jsxs)("div",{className:"contextMenu",ref:O,"data-state":g,onClick:function(){C("closed")},children:[Object(a.jsx)("li",{role:"button",onClick:function(){b(n,[F])},children:"Remove Link"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==F&&navigator.clipboard.writeText(t.content[F].href)},children:"Copy Link"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==F&&chrome.tabs.create({url:t.content[F].href})},children:"Open"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==F&&chrome.windows.create({url:t.content[F].href,state:"maximized"})},children:"Open in new window"}),Object(a.jsx)("li",{role:"button",onClick:function(){null!==F&&chrome.windows.create({url:t.content[F].href,state:"maximized",incognito:!0})},children:"Open in incognito window"})]}),Object(a.jsxs)("div",{className:"deleteSelected",style:0===L.length?{display:"none"}:{display:"flex"},children:[Object(a.jsxs)("span",{className:"selectedInfo",children:[L.length," selected"]}),Object(a.jsxs)("span",{className:"options",children:[Object(a.jsx)("button",{onClick:function(){t.content.filter((function(e,t){return L.includes(t)})).map((function(e){return e.href})).forEach((function(e){chrome.tabs.create({url:e,active:!1})}))},children:"Open"}),Object(a.jsx)("button",{onClick:function(){var e=t.content.filter((function(e,t){return L.includes(t)})).map((function(e){return e.href}));chrome.windows.create({url:e,state:"maximized",incognito:!0})},children:"Open Incognito"}),Object(a.jsx)("button",{onClick:function(){b(n,L),U()},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})}),Object(a.jsx)("button",{onClick:U,children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:Object(a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]}),Object(a.jsx)("div",{className:"createNew",style:0===L.length?{display:"flex"}:{display:"none"},children:Object(a.jsx)("button",{className:"addCurrentLink",onClick:function(e){console.log("dddd"),chrome.tabs.query({active:!0,currentWindow:!0}).then((function(e){var t=e[0];console.log(t),h({colIndex:l?0:n,link:t.url,title:t.title,cover:t.favIconUrl})}))},children:"Add Current Link"})}),Object(a.jsx)("div",{id:"collectionView ",className:"collection-view",ref:x,children:null===t||0===t.content.length?Object(a.jsx)("p",{children:"No Item"}):t.content.map((function(e,t){return Object(a.jsx)(f,{cover:e.cover,title:e.title,href:e.href,indexNumber:t,currentCollection:n,removeLinkFromCollection:b,linkContextMenu:y,addToSelected:I,removeFromSelected:z},e.href+t)}))})]})]})},m=!1;console.log("production",m);var x=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1];Object(c.useEffect)((function(){chrome.storage.sync.get("collections",(function(e){var t=e.collections;console.log("d",t),void 0===t?(o([]),chrome.storage.sync.set({collections:[]},(function(){console.log("yeee",n)}))):o(t),console.log("data1",n)})),document.getElementById("app").oncontextmenu=function(e){e.preventDefault()}}),[]);var l=Object(c.useState)(null),i=Object(s.a)(l,2),d=i[0],u=i[1],j=Object(c.useState)(!1),f=Object(s.a)(j,2),m=f[0],x=f[1],O=function(){x(!0)};Object(c.useEffect)((function(){console.log(n),console.log(n),chrome.storage.sync.set({collections:n}),chrome.storage.sync.get("collections",(function(e){var t=e.collections;console.log(n,t)}))}),[n]);var v=function(e){var t=e.colIndex,c=e.link,l={type:"link",title:e.title||"title",cover:e.cover||"",href:c};console.log("newContentItem",l),n[t].content.unshift(l),o(Object(r.a)(n))},p=function(e,t){if(!(n.length<e)&&!(n[e].content.length<Math.max.apply(Math,Object(r.a)(t)))){console.log(e,t);var c=Object(r.a)(n);c[e].content=c[e].content.filter((function(e,n){return console.log(t.includes(n),t,n),!t.includes(n)})),console.log(c),o(c)}},g=function(){var e=[];chrome.tabs.query({currentWindow:!0}).then((function(t){console.log(t),t.forEach((function(t){e.push({type:"link",href:t.url,title:t.title,cover:t.favIconUrl})})),n.unshift({name:(new Date).toUTCString(),cover:"",content:e}),o(Object(r.a)(n))}))},C=function(e){"rename"===e.type&&(n[e.index].name=e.name,o(n))};return Object(a.jsx)(a.Fragment,{children:!0===m?Object(a.jsx)(b,{isNew:!0,newColMakingUpdater:x,collection:null,currentCollection:d,newCollection1:O,newCollection2:g,editCollection:C,currentCollectionUpdater:u,addToCollections:function(e){var t=[{name:e.name,cover:"",content:e.content}].concat(Object(r.a)(n));console.log("new"),o(t)},addLinkToCollection:v,removeLinkFromCollection:p}):null===d?Object(a.jsx)(h,{collectionData:n,newCollection1:O,newCollection2:g,currentCollectionUpdater:u,removeCollections:function(e){if(!(n.length<Math.max.apply(Math,Object(r.a)(e)))){var t=Object(r.a)(n).filter((function(t,n){return console.log(e.includes(n),e,n),!e.includes(n)}));console.log(t),o(t)}}}):Object(a.jsx)(b,{isNew:!1,newColMakingUpdater:x,collection:n[d],currentCollection:d,newCollection1:O,newCollection2:g,editCollection:C,currentCollectionUpdater:u,addLinkToCollection:v,removeLinkFromCollection:p})})};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("app"))}},[[14,1,2]]]);
//# sourceMappingURL=main.0303fb4f.chunk.js.map